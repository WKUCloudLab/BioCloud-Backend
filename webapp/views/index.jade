extends base

block content

  section.container
    section.containerHeader 
      span Jobs Summary
    section.containerContent

      for job in jobs
        cell
          section.container
            section.containerHeader 
              span #{job.title}:
              span.rightSpan #{job.status}
            section.containerContent
              item.jobItem Script: #{job.script}
              item.jobItem File: #{job.file}
              section.containerFooter
                item.jobItem Began: #{job.began}
                a.button.rightButton +

  section.container
    section.containerHeader 
      span File Summary
    section.containerContent

      for file in files
        cell
          section.container
            section.containerHeader 
              span #{file.name}
            section.containerContent
              item.jobItem Uploaded: #{file.uploaded}
              item.jobItem Size: #{file.size}
              section.containerFooter
                a.button.rightButton +

      script.
          function ajax() {
            alert('working');
            
            var formData = new FormData();
            var fileData = $('#upload')[0].files[0];
            console.log(fileData);
            formData.append("file", fileData);
            //console.log(formData);
            
            $.ajax({
              method: "POST",
              url:"/index/upload",
              processData:false,
              contentType:false,
              data: formData,
              success:function(data){
                console.log(data);
                alert(data);
              },
              error:function(xhr, status, err){
                console.log(err);
              }
            }).done(function( msg ){
              alert( "Data Saved: " + msg );
            });
          };
          
      section.fileInputContainer
        input(type="file" name="upload")#upload
      button(onclick='ajax()').button.submitButton Upload File